/*
 * JS-module: Main.
 * Main Javascript file.
 * @author    Jakob Metzger <jakob.me@gmail.com>
 * @copyright 2015 Jakob Metzger
 * @license   http://www.php.net/license/3_0.txt PHP License 3.0
 */
$(document).ready(function(){function t(t,e){return T+t+j+e+T+D+t+j}function e(t){return T+K+I+t+J+j+t+T+D+K+j}function a(){fe.removeClass(p),setTimeout(function(){fe.addClass(p)},2e3)}function n(t,e){var a=t.attr(g),n=a.length,o=0,i=5,r;t.addClass(p),function c(){r=setTimeout(function(){o++;var i=a.substring(0,o);t.html(i),c(),o===n&&(t.removeAttr(g),t.removeClass(p),clearTimeout(r),e())},i)}()}function o(t){var e=!1;t===!0?pe--:t===!1&&pe++,0>pe&&(pe=0),pe>=me.length&&(pe=me.length,e=!0),de.text(w),fe.text(String.fromCharCode(Yt)),e?ue.text(xe):ue.text(me[pe])}function i(a){if(a.length>0){var n;if(a=a.split(String.fromCharCode(Yt)),n=a[0]===Tt&&void 0!==a[1]?a[0]+String.fromCharCode(Yt)+a[1]:a[0],a=a[0],le.append(t(L,t(H,t(P,X)+Q+t(E,W)+y+n))),me.push(n),pe=me.length,xe=w,ue.add(de).text(w),fe.text(String.fromCharCode(Yt)),Ht.hasOwnProperty(a))switch(a){case Kt:ne.animate({scrollTop:0},250,function(){le.html(w)});break;case jt:var o=w;for(var i in Ht)Ht.hasOwnProperty(i)&&(o+=t(z,i)+N+Ht[i]+V);o+=V+pt+t(O,it)+St+t(q,Y)+_t+V+V,o+=t(A,mt)+V+ct+t(q,ht)+M+st+t(q,ut)+M+lt+t(q,ft)+v+V,o+=V+t(A,xt)+V+ot+t(q,Z)+Ct+t(q,tt)+kt+v+V+ot+t(q,et)+Ct+t(q,at)+wt+v+V+ot+t(q,nt)+yt+v+V+ot+t(q,Y)+vt+t(O,it)+v,le.append(t(F,o));break;case Dt:var r=w;$.each(Bt,function(a,n){r+=n[0]===qt?t(E,n[1])+V:n[0]===Ut?e(n[1])+V:t(U,n[1])+V}),le.append(t(F,r));break;case Tt:break;case Lt:break;case Pt:break;case zt:break;case At:}else le.append(t(F,a+R+t(G,dt)+gt+t(z,bt)+$t+t(O,rt)+v))}ne.animate({scrollTop:oe.height()},500)}var r="#computer",c="#logo",s="#intro-title",l="#intro-subtitle",h="#intro-hint",u="#output",f="#input",d="#input-current",m="#input-before",x="#input-after",p="blink",b="ready",g="data-text",C="click",k="keydown",w="",y=" ",v=".",S="-",_="_",D="/",T="<",j=">",K="a",L="p",P="b",z="i",A="u",O="em",U="ins",q="dfn",H="span",B="body",E="small",F="blockquote",G="strong",I=" href='http://",J="' target='_blank'",M=", ",N=" â€” ",Q=":~ ",R=": ",V="<br/>",W="guest$",X="jmportfolio",Y="enter",Z="left",tt="right",et="up",at="down",nt="tab",ot="Press ",it="command",rt="commands",ct="Letters ",st="numbers ",lt="punctuation ",ht="[a-z]",ut="[0-9]",ft="[._-]",dt="Command not found",mt="Allowed input:",xt="Hint:",pt="Type your ",bt="help",gt=". Use ",Ct=" and ",kt=" arrow keys to move the cursor",wt=" arrow keys to navigate your command history",yt=" to autocomplete filenames",vt=" to execute your ",$t=" to list available ",St=" below and press ",_t=" to execute it.",Dt="ls",Tt="open",jt="help",Kt="clear",Lt="random",Pt="about",zt="contact",At="notice",Ot="text",Ut="html",qt="hidden",Ht={ls:"List all files",open:"Display file content",help:"Display this help",clear:"Clear terminal",random:"Display random file",about:"Display info about me (about.txt)",contact:"Display contact information (contact.txt)",notice:"Display legal information (notice.txt)"},Bt=[[Ot,"about.txt",""],[Ot,"contact.txt",""],[Ot,"notice.txt",""],[Ot,"skills.dat",""],[Ot,"01_lichtblick.pdf",""],[Ot,"02_minimalicons.pdf",""],[Ot,"03_aurora.pdf",""],[Ot,"04_tinycons.pdf",""],[Ot,"05_jakobmetzger.pdf",""],[Ut,"mannmitdertarnjacke.deviantart.com"],[Ut,"lichtblick-im-auetal.de"],[qt,".fun",""]],Et=8,Ft=9,Gt=13,It=32,Jt=37,Mt=38,Nt=39,Qt=40,Rt=65,Vt=90,Wt=48,Xt=57,Yt=160,Zt=189,te=173,ee=186,ae=190,ne=$(B),oe=$(r),ie=$(c),re=$(s),ce=$(l),se=$(h),le=$(u),he=$(f),ue=$(m),fe=$(d),de=$(x),me=[],xe=w,pe=me.length;$(window).load(function(){n(re,function(){n(ce,function(){n(se,function(){ie.removeClass(p),he.addClass(b),oe.addClass(b)})})})}),oe.on(k,function(t){if(t.preventDefault(),!$(this).hasClass(b))return!1;switch(a(),t.which){case Et:ue.text().length>0&&(ue.text(ue.text().slice(0,ue.text().length-1)),xe=ue.text()+fe.text().trim()+de.text());break;case Ft:break;case Gt:if(t.shiftKey)ue.text(ue.text()+String.fromCharCode(Yt));else{var e=(ue.text()+fe.text()+de.text()).trim();i(e)}break;case Jt:ue.text().length>0&&(de.text().length>0?de.text(fe.text()+de.text()):de.text(fe.text().trim()),fe.text(ue.text().slice(-1)),ue.text(ue.text().slice(0,ue.text().length-1)));break;case Nt:if(fe.text()!==String.fromCharCode(Yt)||de.text().length>0){ue.text(ue.text()+fe.text());var n=de.text().slice(0,1);0===n.length&&(n=String.fromCharCode(Yt)),fe.text(n),de.text(de.text().slice(1,de.text().length))}break;case Mt:o(!0);break;case Qt:o(!1);break;default:var r=String.fromCharCode(t.which);r=t.which>=Rt&&t.which<=Vt?t.shiftKey?r.toUpperCase():r.toLowerCase():t.which>=Wt&&t.which<=Xt?String.fromCharCode(t.which):t.which===It?String.fromCharCode(Yt):t.which===ae||t.which===ee?v:t.which===Zt||t.which===te?t.shiftKey?_:S:w,ue.text(ue.text()+r),xe=ue.text()+fe.text().trim()+de.text()}}),ne.on(C,z,function(){i($(this).text())})});